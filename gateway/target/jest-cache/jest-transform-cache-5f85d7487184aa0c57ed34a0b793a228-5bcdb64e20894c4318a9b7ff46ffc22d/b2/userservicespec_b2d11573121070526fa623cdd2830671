f1ea738bd212ac826a0564773676c072
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const testing_1 = require("@angular/core/testing");
const testing_2 = require("@angular/common/http/testing");
const user_model_1 = require("./user.model");
const user_service_1 = require("./user.service");
describe('User Service', () => {
    let service;
    let httpMock;
    let expectedResult;
    beforeEach(() => {
        testing_1.TestBed.configureTestingModule({
            imports: [testing_2.HttpClientTestingModule],
        });
        expectedResult = null;
        service = testing_1.TestBed.inject(user_service_1.UserService);
        httpMock = testing_1.TestBed.inject(testing_2.HttpTestingController);
    });
    afterEach(() => {
        httpMock.verify();
    });
    describe('Service methods', () => {
        it('should return Users', () => {
            service.query().subscribe(received => {
                expectedResult = received.body;
            });
            const req = httpMock.expectOne({ method: 'GET' });
            req.flush([new user_model_1.User(123, 'user')]);
            expect(expectedResult).toEqual([{ id: 123, login: 'user' }]);
        });
        it('should propagate not found response', () => {
            service.query().subscribe({
                error: (error) => (expectedResult = error.status),
            });
            const req = httpMock.expectOne({ method: 'GET' });
            req.flush('Internal Server Error', {
                status: 500,
                statusText: 'Inernal Server Error',
            });
            expect(expectedResult).toEqual(500);
        });
        describe('addUserToCollectionIfMissing', () => {
            it('should add a User to an empty array', () => {
                const user = { id: 123 };
                expectedResult = service.addUserToCollectionIfMissing([], user);
                expect(expectedResult).toHaveLength(1);
                expect(expectedResult).toContain(user);
            });
            it('should not add a User to an array that contains it', () => {
                const user = { id: 123 };
                const userCollection = [
                    Object.assign({}, user),
                    { id: 456 },
                ];
                expectedResult = service.addUserToCollectionIfMissing(userCollection, user);
                expect(expectedResult).toHaveLength(2);
            });
            it("should add a User to an array that doesn't contain it", () => {
                const user = { id: 123 };
                const userCollection = [{ id: 456 }];
                expectedResult = service.addUserToCollectionIfMissing(userCollection, user);
                expect(expectedResult).toHaveLength(2);
                expect(expectedResult).toContain(user);
            });
            it('should add only unique User to an array', () => {
                const userArray = [{ id: 123 }, { id: 456 }, { id: 27699 }];
                const userCollection = [{ id: 456 }];
                expectedResult = service.addUserToCollectionIfMissing(userCollection, ...userArray);
                expect(expectedResult).toHaveLength(3);
            });
            it('should accept varargs', () => {
                const user = { id: 123 };
                const user2 = { id: 456 };
                expectedResult = service.addUserToCollectionIfMissing([], user, user2);
                expect(expectedResult).toHaveLength(2);
                expect(expectedResult).toContain(user);
                expect(expectedResult).toContain(user2);
            });
            it('should accept null and undefined values', () => {
                const user = { id: 123 };
                expectedResult = service.addUserToCollectionIfMissing([], null, user, undefined);
                expect(expectedResult).toHaveLength(1);
                expect(expectedResult).toContain(user);
            });
            it('should return initial array if no users is added', () => {
                const userCollection = [{ id: 456 }];
                expectedResult = service.addUserToCollectionIfMissing(userCollection, null, undefined);
                expect(expectedResult).toEqual(userCollection);
            });
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxOaWNvbGFzXFxEZXNrdG9wXFx0ZXN0NlxcZ2F0ZXdheVxcc3JjXFxtYWluXFx3ZWJhcHBcXGFwcFxcZW50aXRpZXNcXHVzZXJcXHVzZXIuc2VydmljZS5zcGVjLnRzIiwibWFwcGluZ3MiOiI7O0FBQUEsbURBQWdEO0FBRWhELDBEQUE4RjtBQUU5Riw2Q0FBMkM7QUFFM0MsaURBQTZDO0FBRTdDLFFBQVEsQ0FBQyxjQUFjLEVBQUUsR0FBRyxFQUFFO0lBQzVCLElBQUksT0FBb0IsQ0FBQztJQUN6QixJQUFJLFFBQStCLENBQUM7SUFDcEMsSUFBSSxjQUF5RCxDQUFDO0lBRTlELFVBQVUsQ0FBQyxHQUFHLEVBQUU7UUFDZCxpQkFBTyxDQUFDLHNCQUFzQixDQUFDO1lBQzdCLE9BQU8sRUFBRSxDQUFDLGlDQUF1QixDQUFDO1NBQ25DLENBQUMsQ0FBQztRQUNILGNBQWMsR0FBRyxJQUFJLENBQUM7UUFDdEIsT0FBTyxHQUFHLGlCQUFPLENBQUMsTUFBTSxDQUFDLDBCQUFXLENBQUMsQ0FBQztRQUN0QyxRQUFRLEdBQUcsaUJBQU8sQ0FBQyxNQUFNLENBQUMsK0JBQXFCLENBQUMsQ0FBQztJQUNuRCxDQUFDLENBQUMsQ0FBQztJQUVILFNBQVMsQ0FBQyxHQUFHLEVBQUU7UUFDYixRQUFRLENBQUMsTUFBTSxFQUFFLENBQUM7SUFDcEIsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsaUJBQWlCLEVBQUUsR0FBRyxFQUFFO1FBQy9CLEVBQUUsQ0FBQyxxQkFBcUIsRUFBRSxHQUFHLEVBQUU7WUFDN0IsT0FBTyxDQUFDLEtBQUssRUFBRSxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsRUFBRTtnQkFDbkMsY0FBYyxHQUFHLFFBQVEsQ0FBQyxJQUFJLENBQUM7WUFDakMsQ0FBQyxDQUFDLENBQUM7WUFFSCxNQUFNLEdBQUcsR0FBRyxRQUFRLENBQUMsU0FBUyxDQUFDLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxDQUFDLENBQUM7WUFDbEQsR0FBRyxDQUFDLEtBQUss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RSxHQUFHLEVBQUU7Z0JBQzFELE1BQU0sY0FBYyxHQUFZLENBQUMsRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQztnQkFDOUMsY0FBYyxHQUFHLE9BQU8sQ0FBQyw0QkFBNEIsQ0FBQyxjQUFjLEVBQUUsSUFBSSxFQUFFLFNBQVMsQ0FBQyxDQUFDO2dCQUN2RixNQUFNLENBQUMsY0FBYyxDQUFDLENBQUMsT0FBTyxDQUFDLGNBQWMsQ0FBQyxDQUFDO1lBQ2pELENBQUMsQ0FBQyxDQUFDO1FBQ0wsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcTmljb2xhc1xcRGVza3RvcFxcdGVzdDZcXGdhdGV3YXlcXHNyY1xcbWFpblxcd2ViYXBwXFxhcHBcXGVudGl0aWVzXFx1c2VyXFx1c2VyLnNlcnZpY2Uuc3BlYy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBUZXN0QmVkIH0gZnJvbSAnQGFuZ3VsYXIvY29yZS90ZXN0aW5nJztcbmltcG9ydCB7IEh0dHBFcnJvclJlc3BvbnNlIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uL2h0dHAnO1xuaW1wb3J0IHsgSHR0cENsaWVudFRlc3RpbmdNb2R1bGUsIEh0dHBUZXN0aW5nQ29udHJvbGxlciB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbi9odHRwL3Rlc3RpbmcnO1xuXG5pbXBvcnQgeyBVc2VyLCBJVXNlciB9IGZyb20gJy4vdXNlci5tb2RlbCc7XG5cbmltcG9ydCB7IFVzZXJTZXJ2aWNlIH0gZnJvbSAnLi91c2VyLnNlcnZpY2UnO1xuXG5kZXNjcmliZSgnVXNlciBTZXJ2aWNlJywgKCkgPT4ge1xuICBsZXQgc2VydmljZTogVXNlclNlcnZpY2U7XG4gIGxldCBodHRwTW9jazogSHR0cFRlc3RpbmdDb250cm9sbGVyO1xuICBsZXQgZXhwZWN0ZWRSZXN1bHQ6IElVc2VyIHwgSVVzZXJbXSB8IGJvb2xlYW4gfCBudW1iZXIgfCBudWxsO1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIFRlc3RCZWQuY29uZmlndXJlVGVzdGluZ01vZHVsZSh7XG4gICAgICBpbXBvcnRzOiBbSHR0cENsaWVudFRlc3RpbmdNb2R1bGVdLFxuICAgIH0pO1xuICAgIGV4cGVjdGVkUmVzdWx0ID0gbnVsbDtcbiAgICBzZXJ2aWNlID0gVGVzdEJlZC5pbmplY3QoVXNlclNlcnZpY2UpO1xuICAgIGh0dHBNb2NrID0gVGVzdEJlZC5pbmplY3QoSHR0cFRlc3RpbmdDb250cm9sbGVyKTtcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKCgpID0+IHtcbiAgICBodHRwTW9jay52ZXJpZnkoKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1NlcnZpY2UgbWV0aG9kcycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJldHVybiBVc2VycycsICgpID0+IHtcbiAgICAgIHNlcnZpY2UucXVlcnkoKS5zdWJzY3JpYmUocmVjZWl2ZWQgPT4ge1xuICAgICAgICBleHBlY3RlZFJlc3VsdCA9IHJlY2VpdmVkLmJvZHk7XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVxID0gaHR0cE1vY2suZXhwZWN0T25lKHsgbWV0aG9kOiAnR0VUJyB9KTtcbiAgICAgIHJlcS5mbHVzaChbbmV3IFVzZXIoMTIzLCAndXNlcicpXSk7XG4gICAgICBleHBlY3QoZXhwZWN0ZWRSZXN1bHQpLnRvRXF1YWwoW3sgaWQ6IDEyMywgbG9naW46ICd1c2VyJyB9XSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHByb3BhZ2F0ZSBub3QgZm91bmQgcmVzcG9uc2UnLCAoKSA9PiB7XG4gICAgICBzZXJ2aWNlLnF1ZXJ5KCkuc3Vic2NyaWJlKHtcbiAgICAgICAgZXJyb3I6IChlcnJvcjogSHR0cEVycm9yUmVzcG9uc2UpID0+IChleHBlY3RlZFJlc3VsdCA9IGVycm9yLnN0YXR1cyksXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVxID0gaHR0cE1vY2suZXhwZWN0T25lKHsgbWV0aG9kOiAnR0VUJyB9KTtcbiAgICAgIHJlcS5mbHVzaCgnSW50ZXJuYWwgU2VydmVyIEVycm9yJywge1xuICAgICAgICBzdGF0dXM6IDUwMCxcbiAgICAgICAgc3RhdHVzVGV4dDogJ0luZXJuYWwgU2VydmVyIEVycm9yJyxcbiAgICAgIH0pO1xuICAgICAgZXhwZWN0KGV4cGVjdGVkUmVzdWx0KS50b0VxdWFsKDUwMCk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnYWRkVXNlclRvQ29sbGVjdGlvbklmTWlzc2luZycsICgpID0+IHtcbiAgICAgIGl0KCdzaG91bGQgYWRkIGEgVXNlciB0byBhbiBlbXB0eSBhcnJheScsICgpID0+IHtcbiAgICAgICAgY29uc3QgdXNlcjogSVVzZXIgPSB7IGlkOiAxMjMgfTtcbiAgICAgICAgZXhwZWN0ZWRSZXN1bHQgPSBzZXJ2aWNlLmFkZFVzZXJUb0NvbGxlY3Rpb25JZk1pc3NpbmcoW10sIHVzZXIpO1xuICAgICAgICBleHBlY3QoZXhwZWN0ZWRSZXN1bHQpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICAgICAgZXhwZWN0KGV4cGVjdGVkUmVzdWx0KS50b0NvbnRhaW4odXNlcik7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBub3QgYWRkIGEgVXNlciB0byBhbiBhcnJheSB0aGF0IGNvbnRhaW5zIGl0JywgKCkgPT4ge1xuICAgICAgICBjb25zdCB1c2VyOiBJVXNlciA9IHsgaWQ6IDEyMyB9O1xuICAgICAgICBjb25zdCB1c2VyQ29sbGVjdGlvbjogSVVzZXJbXSA9IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICAuLi51c2VyLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgeyBpZDogNDU2IH0sXG4gICAgICAgIF07XG4gICAgICAgIGV4cGVjdGVkUmVzdWx0ID0gc2VydmljZS5hZGRVc2VyVG9Db2xsZWN0aW9uSWZNaXNzaW5nKHVzZXJDb2xsZWN0aW9uLCB1c2VyKTtcbiAgICAgICAgZXhwZWN0KGV4cGVjdGVkUmVzdWx0KS50b0hhdmVMZW5ndGgoMik7XG4gICAgICB9KTtcblxuICAgICAgaXQoXCJzaG91bGQgYWRkIGEgVXNlciB0byBhbiBhcnJheSB0aGF0IGRvZXNuJ3QgY29udGFpbiBpdFwiLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHVzZXI6IElVc2VyID0geyBpZDogMTIzIH07XG4gICAgICAgIGNvbnN0IHVzZXJDb2xsZWN0aW9uOiBJVXNlcltdID0gW3sgaWQ6IDQ1NiB9XTtcbiAgICAgICAgZXhwZWN0ZWRSZXN1bHQgPSBzZXJ2aWNlLmFkZFVzZXJUb0NvbGxlY3Rpb25JZk1pc3NpbmcodXNlckNvbGxlY3Rpb24sIHVzZXIpO1xuICAgICAgICBleHBlY3QoZXhwZWN0ZWRSZXN1bHQpLnRvSGF2ZUxlbmd0aCgyKTtcbiAgICAgICAgZXhwZWN0KGV4cGVjdGVkUmVzdWx0KS50b0NvbnRhaW4odXNlcik7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBhZGQgb25seSB1bmlxdWUgVXNlciB0byBhbiBhcnJheScsICgpID0+IHtcbiAgICAgICAgY29uc3QgdXNlckFycmF5OiBJVXNlcltdID0gW3sgaWQ6IDEyMyB9LCB7IGlkOiA0NTYgfSwgeyBpZDogMjc2OTkgfV07XG4gICAgICAgIGNvbnN0IHVzZXJDb2xsZWN0aW9uOiBJVXNlcltdID0gW3sgaWQ6IDQ1NiB9XTtcbiAgICAgICAgZXhwZWN0ZWRSZXN1bHQgPSBzZXJ2aWNlLmFkZFVzZXJUb0NvbGxlY3Rpb25JZk1pc3NpbmcodXNlckNvbGxlY3Rpb24sIC4uLnVzZXJBcnJheSk7XG4gICAgICAgIGV4cGVjdChleHBlY3RlZFJlc3VsdCkudG9IYXZlTGVuZ3RoKDMpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgYWNjZXB0IHZhcmFyZ3MnLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHVzZXI6IElVc2VyID0geyBpZDogMTIzIH07XG4gICAgICAgIGNvbnN0IHVzZXIyOiBJVXNlciA9IHsgaWQ6IDQ1NiB9O1xuICAgICAgICBleHBlY3RlZFJlc3VsdCA9IHNlcnZpY2UuYWRkVXNlclRvQ29sbGVjdGlvbklmTWlzc2luZyhbXSwgdXNlciwgdXNlcjIpO1xuICAgICAgICBleHBlY3QoZXhwZWN0ZWRSZXN1bHQpLnRvSGF2ZUxlbmd0aCgyKTtcbiAgICAgICAgZXhwZWN0KGV4cGVjdGVkUmVzdWx0KS50b0NvbnRhaW4odXNlcik7XG4gICAgICAgIGV4cGVjdChleHBlY3RlZFJlc3VsdCkudG9Db250YWluKHVzZXIyKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGFjY2VwdCBudWxsIGFuZCB1bmRlZmluZWQgdmFsdWVzJywgKCkgPT4ge1xuICAgICAgICBjb25zdCB1c2VyOiBJVXNlciA9IHsgaWQ6IDEyMyB9O1xuICAgICAgICBleHBlY3RlZFJlc3VsdCA9IHNlcnZpY2UuYWRkVXNlclRvQ29sbGVjdGlvbklmTWlzc2luZyhbXSwgbnVsbCwgdXNlciwgdW5kZWZpbmVkKTtcbiAgICAgICAgZXhwZWN0KGV4cGVjdGVkUmVzdWx0KS50b0hhdmVMZW5ndGgoMSk7XG4gICAgICAgIGV4cGVjdChleHBlY3RlZFJlc3VsdCkudG9Db250YWluKHVzZXIpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgcmV0dXJuIGluaXRpYWwgYXJyYXkgaWYgbm8gdXNlcnMgaXMgYWRkZWQnLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHVzZXJDb2xsZWN0aW9uOiBJVXNlcltdID0gW3sgaWQ6IDQ1NiB9XTtcbiAgICAgICAgZXhwZWN0ZWRSZXN1bHQgPSBzZXJ2aWNlLmFkZFVzZXJUb0NvbGxlY3Rpb25JZk1pc3NpbmcodXNlckNvbGxlY3Rpb24sIG51bGwsIHVuZGVmaW5lZCk7XG4gICAgICAgIGV4cGVjdChleHBlY3RlZFJlc3VsdCkudG9FcXVhbCh1c2VyQ29sbGVjdGlvbik7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdLCJ2ZXJzaW9uIjozfQ==